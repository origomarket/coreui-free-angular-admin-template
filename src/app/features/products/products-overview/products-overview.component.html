<!-- products-overview.component.html -->
<c-container breakpoint="md">
    <c-row>
        <form [formGroup]="sortAndFilterForm!" cForm>
            <c-col>
                <c-input-group>
                    <span cInputGroupText><svg cIcon name="cilFilter"></svg></span>
                    <input cFormControl type="text" formControlName="filterValue" placeholder="Filter by name">
                    <select formControlName="filterField" cSelect>
                        <option value="">Filtra per...</option>
                        <option value="name">Name</option>
                        <option value="type">Categoria</option>
                        <!-- Add more options as needed -->
                    </select>
                </c-input-group>
            </c-col>
            <c-col>
                <c-input-group>
                <span cInputGroupText>
                    <svg cIcon name="cilSortAscending"></svg>
                    <svg cIcon name="cilSortDescending"></svg>
                </span>
                    <select formControlName="sortField" cSelect>
                        <option value="name">Name</option>
                        <option value="unitPrice">Prezzo</option>
                        <option value="type">Categoria</option>
                        <option value="stock">Stock</option>
                    </select>
                </c-input-group>
            </c-col>
        </form>
    </c-row>
    <c-row>
        <c-col *ngFor="let product of products | async" >

            <c-card>
                <c-card-header>
                    <c-input-group class="mb-3">
                    <span cInputGroupText>
                        <svg cIcon name="{{product.type | productIcon }}"></svg>
                    </span>
                    <span>
                        <button cButton type="button" class="mt-3" color="link" (click)="seeDetails(product)">{{ product.name | titlecase }}</button>
                    </span>
                    </c-input-group>
                </c-card-header>
                <c-card-body>
                    <c-carousel>
                        <c-carousel-indicators></c-carousel-indicators>
                        <c-carousel-inner>
                            <c-carousel-item *ngFor="let slide of product.imagesUrl">
                                <img cImg fluid [src]="slide | async" loading="lazy" />
                            </c-carousel-item>
                        </c-carousel-inner>
                        <c-carousel-control [routerLink] caption="Previous" direction="prev"></c-carousel-control>
                        <c-carousel-control [routerLink] caption="Next" direction="next"></c-carousel-control>
                    </c-carousel>
                    <p cCardText>
                        {{ product.description.substring(0,50) }} ...
                    </p>
                 </c-card-body>
                <ul cListGroup [flush]="true">
                    <li cListGroupItem><span><strong>Codice Fornitore: </strong><em>{{product.code}}</em></span></li>
                    <li cListGroupItem><strong>Prezzo: </strong><em>{{product.currency}}{{ product.unitPrice }}</em></li>
                    <li cListGroupItem><strong>Stock: </strong><em>{{product.stock}}</em></li>
                </ul>
            </c-card>      
        </c-col>
    </c-row>
 </c-container>