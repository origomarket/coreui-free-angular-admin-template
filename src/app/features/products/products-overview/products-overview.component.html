<!-- products-overview.component.html -->
<c-container breakpoint="md">

    <c-header position="sticky" class="header header-sticky" [gutter]="2">

        <form [formGroup]="sortAndFilterForm!" cForm>
            <c-col>
                <c-input-group>
                    <span cInputGroupText>
                                            <button
                                                    [disabled]="true"
                                                    color="light" shape="rounded-pill"
                                                    size="sm"
                                                    cButton>
                        <svg cIcon name="cilFilter"></svg>
                    </button>
                    </span>
                    <select formControlName="filterField" cSelect>
                        <option value="none">Filtra per...</option>
                        <option value="name">Name</option>
                        <option value="type">Categoria</option>
                        <option value="code">Codice</option>
                    </select>
                    <input cFormControl type="text" formControlName="filterValue" placeholder="es. vino">
                </c-input-group>
            </c-col>
            <c-col>
                <c-input-group>
                <span cInputGroupText>

                    <button cTooltip="{{sortOrderValue}}" (click)="sortProducts()"
                            [disabled]="sortFieldValue === 'none'"
                            color="light" shape="rounded-pill"
                            size="sm"
                            cButton>
                        <svg cIcon name="{{productsSortOrder.iconName}}"></svg>
                    </button>
                </span>
                    <select formControlName="sortField" cSelect>
                        <option value="none">Ordina per...</option>
                        <option value="name">Name</option>
                        <option value="unitPrice">Prezzo</option>
                        <option value="type">Categoria</option>
                        <option value="stock">Stock</option>
                    </select>
                </c-input-group>
            </c-col>
        </form>
    </c-header>

    <c-row [xs]="1" [sm]="2" [md]="3" [gutter]="1">
        <c-col [sm]="6" *ngFor="let product of products | async">
            <c-card class="mb-4">
                <c-card-header>
                    <c-input-group class="mb-3">
                    <span cInputGroupText>
                        <svg cIcon name="{{product.type | productIcon }}"></svg>
                    </span>
                        <span>
                        <button cButton type="button" class="mt-3" color="link" (click)="seeDetails(product)">{{ product.name | titlecase }}</button>
                    </span>
                    </c-input-group>
                </c-card-header>
                <c-card-body>
                    <c-carousel>
                        <c-carousel-indicators></c-carousel-indicators>
                        <c-carousel-inner>
                            <c-carousel-item *ngFor="let slide of product.imagesUrl">
                                <img cImg fluid [src]="slide | async" loading="lazy"/>
                            </c-carousel-item>
                        </c-carousel-inner>
                        <c-carousel-control [routerLink] caption="Previous" direction="prev"></c-carousel-control>
                        <c-carousel-control [routerLink] caption="Next" direction="next"></c-carousel-control>
                    </c-carousel>
                    <p cCardText>
                        {{ product.description.substring(0, 50) }} ...
                    </p>
                    <ul cListGroup [flush]="true">
                        <li cListGroupItem><span><strong>Codice Fornitore: </strong><em>{{ product.code }}</em></span></li>
                        <li cListGroupItem><strong>Prezzo: </strong><em>{{ product.unitPrice }}</em>&nbsp;
                            <svg cIcon name="{{product.currency | currencyIcon}}"></svg>
                        </li>
                        <li cListGroupItem><strong>Stock: </strong><em>{{ product.stock }}</em></li>
                    </ul>
                </c-card-body>
            </c-card>
        </c-col>
    </c-row>
</c-container>